import{f as w}from"./format-date-c1755997.js";import{a as h,b as p}from"./index-7ac5c549.js";const E=(t,e)=>{const r=t.charCodeAt(e);return r>=65&&r<=90},a=t=>t[0].toUpperCase()+t.slice(1),x=new Set(["workflowType"]),I=t=>x.has(t)?`${t}Name`:t,V=t=>{let e="",r=0;for(t=I(t);r<(t==null?void 0:t.length);){const o=t[r],n=t[r+1];if(r===0){e+=t[r].toUpperCase(),r++;continue}if(o+n==="Id"){e+=" ID",r+=2;continue}if(E(t,r)){e+=" ",e+=o.toUpperCase(),r++;continue}e+=o,r++}return e},T={key:"",value:""},S=new Set(["activityId","attempt","binaryChecksum","identity","parentInitiatedEventId","requestId","scheduledEventId","startedEventId","lastHeartbeatTime","scheduledTime","expirationTime"]),B=t=>S.has(t),y=(t,e)=>!(e===null||e===void 0||e===""||e==="0s"||t==="type"),D=t=>!(t===null||t===void 0||t===""||Array.isArray(t)&&!t.length),M=t=>{var e,r,o;return typeof t=="string"?t:(o=(r=(e=t==null?void 0:t.payloads)!=null?e:t==null?void 0:t.indexedFields)!=null?r:t==null?void 0:t.points)!=null?o:t},j=["baseRunId","continuedExecutionRunId","firstExecutionRunId","newExecutionRunId","newRunId","originalExecutionRunId"],q=t=>{for(const e of j)if(t===e)return!0;return!1},N=["taskQueueName"],z=t=>{for(const e of N)if(t===e)return!0;return!1},R=["workflowExecutionWorkflowId","workflowExecutionRunId"],H=(t,e)=>{const r=Boolean((e==null?void 0:e.workflowExecutionWorkflowId)&&(e==null?void 0:e.workflowExecutionRunId));for(const o of R)if(t===o&&r)return!0;return!1},f=(t,e)=>{if(typeof e=="object"){const[r]=Object.keys(e);return{key:t+a(r),value:e[r]}}else return{key:t,value:e.toString()}},A=["failure","input","activityType","parentInitiatedEventId","workflowExecution","workflowType","taskQueue"],C=({attributes:t})=>{for(const[e,r]of Object.entries(t))if(y(e,r))return f(e,r)},d=t=>{var r,o,n,i,l;const e=C(t);if(p(t)){const s=(i=(n=(o=(r=t.markerRecordedEventAttributes)==null?void 0:r.details)==null?void 0:o.data)==null?void 0:n.payloads)==null?void 0:i[0],c=(l=s==null?void 0:s.ActivityType)!=null?l:s==null?void 0:s.activity_type;if(c)return f("ActivityType",c)}for(const[s,c]of Object.entries(t.attributes))for(const k of A)if(s===k&&y(s,c))return f(s,c);return e},L=({lastEvent:t})=>d(t),_=t=>t?h(t)?L(t):d(t):T,O=new Set(["header"]),Q=new Set(["taskQueue","retryPolicy","parentWorkflowExecution","workflowExecution"]),g=new Set(["maximumAttempts"]),u="Unlimited",G="No Expiration",b=(t,e)=>t===0?G:e,v=(t,e)=>t===0?u:t-e,J=t=>t===0?u:t,P=(t,e)=>t==="maximumAttempts"&&e===0?u:e,W=(t,e)=>{if(Q.has(e)&&typeof t[e]=="object"){for(const[r,o]of Object.entries(t[e]))D(o)&&(g.has(r)?t[`${e}${a(r)}`]=P(r,o):t[`${e}${a(r)}`]=o);delete t[e]}},X=(t,{compact:e}={compact:!1})=>{const r={};e&&(r.eventTime=w(t.eventTime));for(const[o,n]of Object.entries(t.attributes)){const i=y(o,n);!O.has(o)&&i&&(r[o]=n),W(r,o)}return r},m=["summary","parent","activity","taskQueue","schedule","retryPolicy","workflow","searchAttributes"],Y={activity:{label:"Activity",color:"gray"},parent:{label:"Parent",color:"gray"},retryPolicy:{label:"Retry Policy",color:"gray"},schedule:{label:"Schedule",color:"gray"},searchAttributes:{label:"Search Attributes",color:"gray"},summary:{label:"Summary",color:"gray"},taskQueue:{label:"Task Queue",color:"gray"},workflow:{label:"Workflow",color:"gray"}},K=(t,e)=>{var r,o;t.category==="activity"&&((r=e==null?void 0:e.activity)==null?void 0:r.length)&&(e.summary=[...e.activity,...e.summary],e.activity=[]),t.category==="activity"&&((o=e==null?void 0:e.workflow)==null?void 0:o.length)&&(e.summary=[...e.summary,...e.workflow],e.workflow=[])},F=t=>{const e=new Set(["summary","searchAttributes"]);for(const[r,o]of Object.entries(t))o.length===1&&!e.has(r)&&(t.summary=[...t.summary,...o],t[r]=[])},Z=(t,e)=>{const r={};m.forEach(o=>{o==="summary"?r[o]=Object.keys(e):r[o]=[]});for(const o of Object.keys(e)){const n=m.find(i=>o.includes(i));n&&(r[n]=[o,...r[n]],r.summary=r.summary.filter(i=>i!==o))}return K(t,r),F(r),r};export{v as a,H as b,a as c,z as d,V as e,b as f,B as g,M as h,Y as i,X as j,Z as k,_ as l,J as m,q as s};
